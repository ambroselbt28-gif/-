========================================
反派逆袭系统 - 开始使用指南
========================================

欢迎！本指南将帮助您在 3 分钟内完成游戏安装。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
第一步：准备安装包
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 双击运行【准备安装包.bat】
2. 等待脚本完成，会生成 villain-game-install 文件夹
3. 检查文件夹内容应包含:
   - index.html
   - game.js
   - style.css
   - 反派逆袭系统指南.yaml
   - 本地安装指南.md
   - README.txt

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
第二步：复制到 SillyTavern
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 打开你的 SillyTavern 安装目录
2. 找到 public 文件夹（如果没有就创建一个）
3. 将 villain-game-install 文件夹复制到 public 里
4. 重命名为 villain-game

最终路径应该是:
SillyTavern/public/villain-game/index.html

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
第三步：配置酒馆
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

方式 A - 通过世界书嵌入（推荐）:

1. 在 SillyTavern 中打开【世界书】
2. 创建一个新条目，名称如"游戏界面"
3. 打开【快速配置代码.txt】文件
4. 复制【1】中的 iframe 代码
5. 粘贴到世界书条目的内容区域
6. 启用该条目

方式 B - 通过角色卡嵌入:

1. 打开角色卡编辑界面
2. 在【描述】字段中粘贴 iframe 代码

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
第四步：配置 AI 提示词
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 打开角色卡编辑界面
2. 找到【系统提示词】或【作者注释】字段
3. 从【快速配置代码.txt】复制【2】中的内容
4. 粘贴到提示词字段
5. 保存角色卡

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
第五步：启动游戏！
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 刷新 SillyTavern 页面（按 F5）
2. 游戏界面应该出现在右上角
3. 按 F12 打开浏览器控制台
4. 检查是否看到:
   ✓ "✓ 检测到TavernHelper API，使用直接通信"
   ✓ "游戏引擎初始化..."
   ✓ "引擎准备就绪"

5. 等待开场白自动播放
6. 在游戏输入框输入你的行动
7. AI 会自动回复并更新游戏状态

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
可选：配置正则替换
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

这一步是可选的，用于清理 AI 回复中的状态更新标记：

1. 在 SillyTavern 中打开【扩展】>【正则替换】
2. 点击【添加】创建新规则
3. 从【快速配置代码.txt】复制【3】中的配置
4. 启用该规则

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
游戏系统指令
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

在游戏输入框输入以下指令:

状态 或 status   - 查看当前游戏状态
帮助 或 help     - 显示帮助信息
保存 或 save     - 保存游戏进度
加载 或 load     - 加载游戏进度
开场 或 opening  - 重新播放开场白

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
界面说明
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【左侧面板】
- 背包: 查看当前拥有的物品
- 主角: 查看天命主角列表和气运值
- 角色: 查看女性角色和好感度（点击可查看详情）
- 技能: 查看已掌握的功法和技能

【中间对话区】
- 显示游戏日志和 AI 回复
- 自动滚动到最新消息

【右侧状态栏】
- 境界: 当前修为境界
- 反派值: 当前反派积分
- 时间: 游戏内时间
- 地点: 当前所在位置
- 任务: 当前进行中的任务

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
故障排除
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

问题1: 游戏界面不显示
  → 检查 public/villain-game/ 文件夹是否存在
  → 确认 iframe 代码中的路径是 /villain-game/index.html
  → 刷新页面（Ctrl + F5 强制刷新）

问题2: 显示 TavernHelper undefined
  → 确认 TavernHelper 扩展已安装
  → 检查 SillyTavern 版本（需要 1.11.0+）
  → 重启 SillyTavern

问题3: AI 收不到消息
  → 确认使用的是本地安装版本（不是 GitHub Pages）
  → 检查控制台是否有红色错误信息
  → 确认 TavernHelper API 正常工作

问题4: 游戏状态不更新
  → 检查 AI 回复中是否包含 {{state_update::}} 标记
  → 确认系统提示词已正确配置
  → 查看控制台的状态更新日志

问题5: 配置文件加载失败
  → 确认 反派逆袭系统指南.yaml 文件存在
  → 检查文件编码是否为 UTF-8
  → 查看控制台的详细错误信息

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
需要帮助？
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📄 详细文档:
   - 本地安装指南.md   - 完整安装说明
   - README.md          - 技术文档和 API 说明
   - 快速配置代码.txt   - 所有配置代码集合

🔍 调试:
   - 按 F12 打开浏览器控制台
   - 查看红色错误信息
   - 检查游戏日志输出

📝 反馈问题:
   - GitHub Issues: https://github.com/ambroselbt28-gif/-/issues

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

祝您游戏愉快！
开始您的反派逆袭之旅吧！

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
