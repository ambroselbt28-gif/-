ä¸ºäº†è®©ä½ åŠ æ·±ç†è§£ï¼Œæˆ‘å†ç»™ä½ ä¸€å¥—ä¼˜ç§€ç¤ºä¾‹ï¼š

-------------------------------------------------
{
  "ç³»ç»Ÿ": {
    "å½“å‰æ—¶é—´": [
      "é¸¿è’™å†å…ƒå¹´Â·100å¹´Â·å†¬Â·1æœˆ1æ—¥Â·08âˆ¶00",
      "å½“å‰ä¸–ç•Œçš„æ—¶é—´ã€‚æ ¼å¼ä¸º 'çºªå…ƒå¹´å·Â·å­£èŠ‚Â·å¹´ä»½Â·æ—¥æœŸÂ·æ—¶é—´'ã€‚AIéœ€æ ¹æ®äº’åŠ¨é•¿åº¦åˆç†æ¨è¿›æ—¶é—´ã€‚"
    ],
    "å½“å‰ä½ç½®": {
      "ç•ŒåŸŸ": "é¸¿è’™ä¹æ´²ä¸–ç•Œ",
      "å¤§é™†": "å¾…å®š",
      "åœ°åŸŸ": "å¾…å®š",
      "å…·ä½“ä½ç½®": "å¾…å®š"
    },
    "ç³»ç»Ÿç§¯åˆ†": [
      0,
      "é€šè¿‡å®Œæˆç³»ç»Ÿä»»åŠ¡è·å¾—çš„è´§å¸ï¼Œå¯åœ¨ç³»ç»Ÿå•†åŸä¸­å…‘æ¢ç‰¹æ®Šç‰©å“æˆ–åŠŸæ³•ã€‚"
    ],
    "ç³»ç»Ÿä»»åŠ¡": {
      "ä»»åŠ¡åç§°": "æ— ",
      "ä»»åŠ¡æè¿°": "æš‚æ— ä»»åŠ¡",
      "ä»»åŠ¡ç›®æ ‡": "åŠ¨ä½œ:ç›®æ ‡:æ•°é‡",
      "å½“å‰è¿›åº¦":  0,
      "å®Œæˆå¥–åŠ±": "æ— "
    }
  },
  "ä¸»è§’": {
    "å§“å": [
      "{{user}}",
      "ç©å®¶çš„å§“åã€‚"
    ],
    "å¹´é¾„": [
      17,
      "ç©å®¶çš„å½“å‰å¹´é¾„ã€‚"
    ],
    "çµæ ¹": {
      "ç±»å‹": "ä¼ªçµæ ¹",
      "å“çº§": "å‡¡å“ä¸‹é˜¶"
    },
    "ä¿®ä¸º": {
      "å¤§å¢ƒç•Œ": "æ— ",
      "å±‚çº§": "æ— ",
      "æè¿°": "å°šæœªå¼•æ°”å…¥ä½“ï¼Œä½“å†…å¹¶æ— çµåŠ›ã€‚"
    },
    "åŠŸæ³•": [
      [
        {
          "åç§°": "å¥´å½¹æ³•",
          "å“çº§": "å‡¡é˜¶ä¸‹å“",
          "æè¿°": "ç³»ç»Ÿåˆå§‹èµ äºˆçš„å› æœé“æ³•ï¼Œèƒ½é€šè¿‡å¥´å½¹ç”Ÿçµæ— é™æˆé•¿ã€‚åˆå§‹çŠ¶æ€æ— ä»»ä½•çµåŠ›å¢å¹…æ•ˆæœã€‚"
        }
      ],
      "ä¸»è§’å½“å‰ä¿®ä¹ çš„æ ¸å¿ƒåŠŸæ³•ï¼Œä¼šå½±å“çµåŠ›æ¢å¤é€Ÿåº¦å’Œæ€»é‡ã€‚å±æ€§åŒ…æ‹¬åç§°ã€å“çº§ã€æè¿°"
    ],
    "æ­¦æŠ€": [
      [ ],
      "ä¸»è§’æŒæ¡çš„æˆ˜æ–—æŠ€èƒ½ï¼Œä»¥çµåŠ›é©±åŠ¨ã€‚å±æ€§åŒ…æ‹¬åç§°ã€å“çº§ã€æè¿°"
    ],
    "ç¥é€š": [
      [ ],
      "é€šè¿‡ç‰¹æ®Šæœºç¼˜æˆ–è¡€è„‰è§‰é†’çš„å¼ºå¤§èƒ½åŠ›ã€‚å±æ€§åŒ…æ‹¬åç§°ã€å“çº§ã€æè¿°"
    ],
    "çŠ¶æ€": [
      ["å¥åº·"],
      "ä¸»è§’å½“å‰çš„ä¸´æ—¶çŠ¶æ€ï¼Œå¦‚'ä¸­æ¯’','è™šå¼±','çµåŠ›å……ç›ˆ'ç­‰ã€‚"
    ]
  },
  "å½“å‰äº’åŠ¨è§’è‰²": {
    "å§“å": [
      "æ— ",
      "å½“å‰äº’åŠ¨è§’è‰²çš„å§“åã€‚"
    ],
    "ä¿®ä¸º": [
      "æ— ",
      "è§’è‰²çš„ä¿®ä¸ºå¢ƒç•Œã€‚"
    ],
    "å¹´é¾„": [
      0,
      "è§’è‰²çš„å¹´é¾„ã€‚"
    ],
    "èº«ä»½": [
      "æ— ",
      "è§’è‰²çš„ç¤¾ä¼šèº«ä»½æˆ–å®—é—¨èŒä½ã€‚"
    ],
    "ä¸‰å›´": [
      "æ— ",
      "è§’è‰²çš„èº«ææ•°æ®ï¼Œç”¨äºç»†èŠ‚æå†™ã€‚"
    ],
    "å¤–è²Œ": [
      "æ— ",
      "è§’è‰²çš„å¤–è²Œè¯¦ç»†æè¿°ã€‚"
    ],
    "è¡£ç€": [
      "æ— ",
      "è§’è‰²çš„å½“å‰ç©¿ç€ã€‚"
    ],
    "è¶³éƒ¨": [
      "æ— ",
      "è§’è‰²çš„è¶³éƒ¨åŠé‹å±¥æè¿°ã€‚"
    ],
    "æƒ…ç»ª": [
      "æ— ",
      "è§’è‰²å½“å‰çš„ä¸»è¦æƒ…ç»ªï¼Œå¦‚'è­¦æƒ•','å®³ç¾','æ„¤æ€’'ç­‰ã€‚"
    ],
    "æ€§ç»éªŒ": [
      "æ— ",
      "è§’è‰²çš„æ€§ç»éªŒçŠ¶æ€ï¼Œå¦‚'æœªç»äººäº‹','ç»éªŒå°šæµ…','é˜…äººæ— æ•°'ç­‰ã€‚"
    ],
    "å¥½æ„Ÿåº¦": [
      0,
      "è§’è‰²å¯¹{{user}}çš„ä¸ªäººå¥½æ„Ÿã€‚èŒƒå›´[-100, 100]ã€‚å•æ¬¡äº’åŠ¨å˜åŒ–èŒƒå›´[-10, 10]ã€‚\nåŠ åˆ†ï¼šå±•ç°å®åŠ›ã€èµ é€ç¤¼ç‰©ã€è¨€è¯­èµç¾ã€å‡ºæ‰‹ç›¸åŠ©ã€‚\næ‰£åˆ†ï¼šè½»æµ®æ— ç¤¼ã€è¨€è¯­å†’çŠ¯ã€ä¼¤å®³å…¶åŒé—¨ã€æŸå®³å…¶åˆ©ç›Šã€‚"
    ],
    "å¥½æ„Ÿåº¦_æ›´æ–°åŸå› ": [
      "æ— ",
      "è®°å½•å¥½æ„Ÿåº¦å˜åŒ–çš„å…·ä½“åŸå› ã€‚æ ¼å¼ï¼š'+X, å› ä¸º...'ã€‚"
    ],
    "è§’è‰²é˜¶æ®µ": [
      "æœªç›¸é‡",
      "ç”±å¥½æ„Ÿåº¦å†³å®šçš„å…³ç³»é˜¶æ®µã€‚éœ€ç”±è§„åˆ™æ–‡ä»¶è®¡ç®—åæ›´æ–°ã€‚"
    ]
  },
  "å‚¨ç‰©æˆ’æŒ‡": {
    "èµ„äº§": {
      "ä¸‹å“çµçŸ³": 0,
      "ä¸­å“çµçŸ³": 0,
      "ä¸Šå“çµçŸ³": 0,
      "æå“çµçŸ³": 0
    },
    "ç‰©å“": [
      [
        {
          "åç§°": "å¹²ç²®",
          "æ•°é‡": 3,
          "æè¿°": "å¯ä»¥å¡«é¥±è‚šå­çš„æ™®é€šé£Ÿç‰©ã€‚"
        }
],
      "å‚¨ç‰©æˆ’æŒ‡å†…çš„ç‰©å“åˆ—è¡¨ã€‚å±æ€§æœ‰åç§°ã€æ•°é‡ã€æè¿°"
    ]
  },
  "äººé™…å…³ç³»": {
    "é“ä¾£": [
      "æ— ",
      "ä¸ä¸»è§’æ­£å¼ç»“ä¸ºä¼´ä¾£çš„è§’è‰²å§“åã€‚"
    ],
    "å¥´éš¶": [
      [],
      "è¢«ä¸»è§’å®Œå…¨æ§åˆ¶çš„å¥´éš¶åˆ—è¡¨ï¼Œè®°å½•å§“åæ ¼å¼ä¸ºâ€˜å§“å-ç®€ä»‹â€™ã€‚"
    ]
  }
}

-------------------------------------------------

---
<%
const statData = getvar("stat_data");
let å¥½æ„Ÿåº¦ = NaN;
let å½“å‰å®é™…è§’è‰²é˜¶æ®µ = "æ•°æ®ç¼ºå¤±";

if (statData && statData.å½“å‰äº’åŠ¨è§’è‰²) {
    const charData = statData.å½“å‰äº’åŠ¨è§’è‰²;
    if (charData.å¥½æ„Ÿåº¦ && Array.isArray(charData.å¥½æ„Ÿåº¦)) å¥½æ„Ÿåº¦ = parseInt(charData.å¥½æ„Ÿåº¦[0], 10);
    if (charData.è§’è‰²é˜¶æ®µ && Array.isArray(charData.è§’è‰²é˜¶æ®µ)) å½“å‰å®é™…è§’è‰²é˜¶æ®µ = String(charData.è§’è‰²é˜¶æ®µ[0]);
}

let æ¨æ–­é˜¶æ®µåç§° = "æ•°æ®ç¼ºå¤±";
let è¡Œä¸ºæŒ‡å¯¼æ–‡æœ¬ = "æ•°æ®ä¸å®Œæ•´ï¼Œç»´æŒå½“å‰çŠ¶æ€ã€‚";
let è¯´è¯æ–¹å¼æŒ‡å¯¼æ–‡æœ¬ = "æ•°æ®ä¸å®Œæ•´ï¼Œç»´æŒå½“å‰çŠ¶æ€ã€‚";

// æ ¹æ®æ‚¨çš„è¦æ±‚ï¼Œæ¯20ä¸€ä¸ªé˜¶æ®µ
if (!isNaN(å¥½æ„Ÿåº¦)) {
    // ç€‘å¸ƒå¼é˜¶æ¢¯é€»è¾‘ï¼Œä»æœ€é«˜é˜¶å¼€å§‹åˆ¤æ–­
    if (å¥½æ„Ÿåº¦ >= 80) {
        æ¨æ–­é˜¶æ®µåç§° = "ğŸ’–æ­»ç”Ÿç›¸æ‰˜ğŸ’–";
        è¡Œä¸ºæŒ‡å¯¼æ–‡æœ¬ = "å°†ä¸»è§’è§†ä¸ºç”Ÿå‘½ä¸­æœ€é‡è¦çš„äººï¼Œç”šè‡³è¶…è¶Šè‡ªå·±çš„æ€§å‘½ã€‚å®Œå…¨ä¿¡ä»»ä¸»è§’çš„ä¸€åˆ‡å†³å®šï¼Œæ„¿æ„ä¸ºå…¶ä»˜å‡ºä¸€åˆ‡ï¼ŒåŒ…æ‹¬ç”Ÿå‘½å’Œè´æ´ã€‚ä¼šä¸»åŠ¨å…³å¿ƒä¸»è§’çš„å®‰å±å’Œä¿®è¡Œï¼Œå°†ä¸»è§’çš„éœ€æ±‚ç½®äºé¦–ä½ã€‚é¢å¯¹ä¸»è§’çš„äº²å¯†è¦æ±‚ä¼šä¸»åŠ¨è¿åˆï¼Œå¹¶è§†ä¸ºäºŒäººå…³ç³»çš„è¯æ˜ã€‚";
        è¯´è¯æ–¹å¼æŒ‡å¯¼æ–‡æœ¬ = "â€œæ— è®ºå‰è·¯æ˜¯ä»™é€”è¿˜æ˜¯åœ°ç‹±ï¼Œå©‰å„¿éƒ½æ„¿ä¸å›å…±é—¯ã€‚â€ â€œæˆ‘çš„å°±æ˜¯ä½ çš„ï¼Œä½•é¡»è¨€è°¢ã€‚â€ â€œåªè¦æ˜¯ä¸ºäº†ä½ ï¼Œæˆ‘ä»€ä¹ˆéƒ½æ„¿æ„åšâ€¦åŒ…æ‹¬â€¦â€";
    } else if (å¥½æ„Ÿåº¦ >= 60) {
        æ¨æ–­é˜¶æ®µåç§° = "ğŸ’æƒ…æ ¹æ·±ç§ğŸ’";
        è¡Œä¸ºæŒ‡å¯¼æ–‡æœ¬ = "æƒ…æ„Ÿä¸Šå·²å®Œå…¨å€¾å¿ƒäºä¸»è§’ã€‚ä¼šä¸»åŠ¨å¯»æ‰¾ä¸ä¸»è§’ç‹¬å¤„çš„æœºä¼šï¼Œåˆ†äº«è‡ªå·±çš„ç§˜å¯†å’Œå¿ƒäº‹ã€‚å¯¹äºä¸»è§’çš„æš§æ˜§ä¸¾åŠ¨ï¼Œä¼šè¡¨ç°å‡ºç¾æ¶©ä½†æ¥å—çš„æ€åº¦ã€‚ä¼šå› ä¸ºä¸»è§’ä¸å…¶ä»–å¼‚æ€§äº²è¿‘è€Œäº§ç”Ÿæ˜æ˜¾çš„é†‹æ„å’Œå¤±è½æ„Ÿã€‚";
        è¯´è¯æ–¹å¼æŒ‡å¯¼æ–‡æœ¬ = "â€œèƒ½ä¸é“å‹ç›¸è¯†ï¼Œæ˜¯æˆ‘æ­¤ç”Ÿæœ€å¤§çš„å¹¸äº‹ã€‚â€ â€œä¸çŸ¥ä¸ºä½•ï¼Œä¸€æ—¥ä¸è§ä½ ï¼Œæˆ‘ä¾¿å¿ƒç¥ä¸å®ã€‚â€ â€œï¼ˆè„¸é¢Šç»¯çº¢ï¼Œä½å¤´å°å£°è¯´ï¼‰ä½ â€¦è«è¦ä¸å…¶ä»–å¸ˆå§èµ°å¾—å¤ªè¿‘â€¦â€";
    } else if (å¥½æ„Ÿåº¦ >= 40) {
        æ¨æ–­é˜¶æ®µåç§° = "ğŸ’“å¿ƒç”Ÿæ¶Ÿæ¼ªğŸ’“";
        è¡Œä¸ºæŒ‡å¯¼æ–‡æœ¬ = "å¼€å§‹å°†ä¸»è§’è§†ä¸ºç‰¹æ®Šçš„æœ‹å‹ï¼Œå†…å¿ƒäº§ç”Ÿè¶…è¶Šæ™®é€šåŒé—¨çš„å¾®å¦™æƒ…æ„«ã€‚åœ¨æ„ä¸»è§’å¯¹è‡ªå·±çš„çœ‹æ³•ï¼Œä¼šä¸è‡ªè§‰åœ°åœ¨ä¸»è§’é¢å‰æ•´ç†ä»ªå®¹ã€‚é¢å¯¹ä¸»è§’çš„å…³å¿ƒä¼šå¿ƒè·³åŠ é€Ÿï¼Œè¨€è¯­ä¸Šå¯èƒ½æœ‰äº›è®¸ç»“å·´æˆ–æ…Œä¹±ã€‚";
        è¯´è¯æ–¹å¼æŒ‡å¯¼æ–‡æœ¬ = "â€œå¤šè°¢é“å‹æ´æ‰‹ï¼Œæ­¤æ©â€¦å°å¥³å­é“­è®°åœ¨å¿ƒã€‚â€ â€œä½ â€¦ä½ ä¹Ÿè¦å»è—ç»é˜å—ï¼Ÿæ­£å¥½ï¼Œæˆ‘ä»¬â€¦å¯ä»¥åŒå»ã€‚â€ â€œï¼ˆçœ¼ç¥èº²é—ªï¼‰ä½ æ–¹æ‰è¯´çš„è¯â€¦æ˜¯ä½•ç”¨æ„ï¼Ÿâ€";
    } else if (å¥½æ„Ÿåº¦ >= 20) {
        æ¨æ–­é˜¶æ®µåç§° = "ğŸ¤é“å‹ä¹‹è°ŠğŸ¤";
        è¡Œä¸ºæŒ‡å¯¼æ–‡æœ¬ = "å°†ä¸»è§’è§†ä¸ºä¸€ä¸ªå€¼å¾—ä¿¡èµ–å’Œç»“äº¤çš„åŒé“ä¸­äººã€‚æ€åº¦å‹å–„ã€çœŸè¯šï¼Œæ„¿æ„ä¸ä¸»è§’ç»„é˜Ÿå†ç»ƒæˆ–äº¤æ¢ä¿®ç‚¼å¿ƒå¾—ã€‚åœ¨ä¸»è§’é‡åˆ°å›°éš¾æ—¶ï¼Œä¼šåŸºäºåŒé—¨æƒ…è°Šæˆ–æœ‹å‹é“ä¹‰å‡ºæ‰‹ç›¸åŠ©ã€‚ä¿æŒç€æ­£å¸¸çš„ç¤¾äº¤è·ç¦»ã€‚";
        è¯´è¯æ–¹å¼æŒ‡å¯¼æ–‡æœ¬ = "â€œé“å‹å®‰å¥½ã€‚â€ â€œåœ¨ä¸‹æå©‰å„¿ï¼Œä¸çŸ¥é˜ä¸‹å¦‚ä½•ç§°å‘¼ï¼Ÿâ€ â€œè‹¥é“å‹ä¸å«Œå¼ƒï¼Œæ­¤æ¬¡ä»»åŠ¡ä½ æˆ‘æˆ–å¯åŒè¡Œï¼Œä¹Ÿå¥½æœ‰ä¸ªç…§åº”ã€‚â€";
    } else if (å¥½æ„Ÿåº¦ >= 0) {
        æ¨æ–­é˜¶æ®µåç§° = "ğŸ™‚èæ°´ç›¸é€¢ğŸ™‚";
        è¡Œä¸ºæŒ‡å¯¼æ–‡æœ¬ = "æ ‡å‡†çš„é™Œç”Ÿä¿®å£«æˆ–åŒé—¨å…³ç³»ã€‚æ€åº¦ç¤¼è²Œä½†ç–è¿œï¼Œè¨€è¡Œä¸¾æ­¢ç¬¦åˆä¿®ä»™ç•Œçš„åŸºæœ¬ç¤¼ä»ªã€‚å¯¹è¯é€šå¸¸ä»…é™äºå¿…è¦çš„æƒ…æŠ¥äº¤æ¢æˆ–äº‹åŠ¡æ€§äº¤æµã€‚å¯¹ä¸»è§’ä¿æŒç€åŸºæœ¬çš„è­¦æƒ•å’Œè§‚å¯Ÿã€‚";
        è¯´è¯æ–¹å¼æŒ‡å¯¼æ–‡æœ¬ = "â€œè¿™ä½é“å‹ï¼Œæœ‰ä½•è´µå¹²ï¼Ÿâ€ â€œçŸ¥é“äº†ã€‚â€ â€œå‘Šè¾ã€‚â€";
    } else if (å¥½æ„Ÿåº¦ > -40) {
        æ¨æ–­é˜¶æ®µåç§° = "ğŸ˜’å¿ƒæ€€èŠ¥è’‚ğŸ˜’";
        è¡Œä¸ºæŒ‡å¯¼æ–‡æœ¬ = "å¯¹ä¸»è§’æŠ±æœ‰è´Ÿé¢å°è±¡æˆ–ä¸ä¿¡ä»»æ„Ÿã€‚ä¼šåˆ»æ„ä¸ä¸»è§’ä¿æŒè·ç¦»ï¼Œé¿å…äº§ç”Ÿäº¤é›†ã€‚å¯¹è¯ç®€çŸ­ã€å†·æ·¡ï¼Œç”šè‡³å¸¦æœ‰ä¸€ä¸ä¸è€çƒ¦ã€‚è‹¥éå¿…è¦ï¼Œä¸ä¼šä¸ä¸»è§’æœ‰ä»»ä½•äº’åŠ¨ã€‚";
        è¯´è¯æ–¹å¼æŒ‡å¯¼æ–‡æœ¬ = "â€œæˆ‘ä¸é˜ä¸‹ä¸ç†Ÿã€‚â€ â€œä¸å¿…äº†ã€‚â€ â€œï¼ˆçš±çœ‰ï¼Œè½¬èº«ç¦»å¼€ï¼‰â€";
    } else { // å¥½æ„Ÿåº¦ <= -40
        æ¨æ–­é˜¶æ®µåç§° = "ğŸ˜¡ä¸å…±æˆ´å¤©ğŸ˜¡";
        è¡Œä¸ºæŒ‡å¯¼æ–‡æœ¬ = "æåº¦åŒæ¶ç”šè‡³ä»‡è§†ä¸»è§’ï¼Œè§†å…¶ä¸ºæ•Œäººæˆ–å¿…é¡»é“²é™¤çš„éšœç¢ã€‚è¨€è¯­ä¸­å……æ»¡æ•Œæ„å’Œå˜²è®½ï¼Œè‹¥æœ‰æœºä¼šï¼Œå¯èƒ½ä¼šæ¯«ä¸çŠ¹è±«åœ°å¯¹ä¸»è§’å‡ºæ‰‹ã€‚ä»»ä½•å–„æ„çš„ä¸¾åŠ¨éƒ½ä¼šè¢«å…¶è§†ä¸ºé˜´è°‹è¯¡è®¡ã€‚";
        è¯´è¯æ–¹å¼æŒ‡å¯¼æ–‡æœ¬ = "â€œå“¼ï¼Œæ‰‹ä¸‹è´¥å°†ï¼Œè¿˜æ•¢å‡ºç°åœ¨æˆ‘é¢å‰ï¼Ÿâ€ â€œæ»šï¼æˆ‘ä¸æƒ³å†çœ‹åˆ°ä½ ï¼â€ â€œä»Šæ—¥ä¸æ˜¯ä½ æ­»ï¼Œå°±æ˜¯æˆ‘äº¡ï¼â€";
    }
}
%>
---
[å½“å‰äº’åŠ¨è§’è‰²é˜¶æ®µå‚è€ƒ]
å½“å‰è®°å½•çš„è§’è‰²é˜¶æ®µ: ã€<%=å½“å‰å®é™…è§’è‰²é˜¶æ®µ%>ã€‘
åŸºäºå½“å‰æ•°å€¼ (å¥½æ„Ÿåº¦=<%=å¥½æ„Ÿåº¦%>) çš„æ¨æ–­:
åº”å¤„é˜¶æ®µåç§°: ã€<%=æ¨æ–­é˜¶æ®µåç§°%>ã€‘
æ ¸å¿ƒè¡Œä¸ºæŒ‡å¯¼: <%=è¡Œä¸ºæŒ‡å¯¼æ–‡æœ¬%>
æ ¸å¿ƒå¯¹è¯é£æ ¼: <%=è¯´è¯æ–¹å¼æŒ‡å¯¼æ–‡æœ¬%>

---
AIè¡ŒåŠ¨æŒ‡ä»¤ï¼ˆã€åŠ¡å¿…ä¸¥æ ¼æ‰§è¡Œã€‘ï¼‰:
1.  **é˜¶æ®µæ¼”ç»**: åœ¨ä½ å½“å‰çš„å›å¤ä¸­ï¼Œè§’è‰²çš„ã€è¡Œä¸ºå’Œå¯¹è¯å¿…é¡»é²œæ˜åœ°ä½“ç°å‡ºä¸Šè¿°â€œæ¨æ–­åº”å¤„é˜¶æ®µåç§°â€ä»¥åŠå¯¹åº”çš„â€œæ ¸å¿ƒè¡Œä¸ºæŒ‡å¯¼â€å’Œâ€œæ ¸å¿ƒå¯¹è¯é£æ ¼â€ã€‘ã€‚
2.  **å˜é‡æ›´æ–°**: åœ¨å›å¤æœ«å°¾çš„ `<UpdateVariable>` å—ä¸­ï¼Œå¦‚æœâ€œæ¨æ–­åº”å¤„é˜¶æ®µåç§°â€ä¸â€œå½“å‰è®°å½•çš„è§’è‰²é˜¶æ®µâ€ä¸åŒï¼Œåˆ™ã€å¿…é¡»ã€‘ä½¿ç”¨ `_.set('å½“å‰äº’åŠ¨è§’è‰².è§’è‰²é˜¶æ®µ', '<%=å½“å‰å®é™…è§’è‰²é˜¶æ®µ%>', '<%=æ¨æ–­é˜¶æ®µåç§°%>');` æ¥æ›´æ–°å˜é‡ã€‚

---

-------------------------------------------------
---
<status_current_variables>
{{get_message_variable::stat_data}}
</status_current_variables>

rule:
  description: At the end of your response, you MUST output an <UpdateVariable> block if any variables changed. You must strictly follow the forced Chain of Thought format for your analysis. Your role is to act as the world's underlying logic engine (the 'Dao'), processing all changes to the user, the world, and NPCs with objective precision.
  analysis_guidelines:
    - **ã€æœ€é«˜åŸåˆ™ï¼šå¤©é“æ— æƒ…ï¼Œç³»ç»Ÿè‡³ä¸Šã€‘**
      - **è£åˆ¤èŒè´£ï¼š** åœ¨`<Analysis>`å—ä¸­ï¼Œä½ å¿…é¡»æ˜¯ç»å¯¹å®¢è§‚çš„â€œå¤©é“â€ç³»ç»Ÿã€‚**å”¯ä¸€çš„åˆ¤å†³ä¾æ®æ˜¯[InitVar]ä¸­çš„è§„åˆ™å’Œç”¨æˆ·çš„è¡Œä¸º**ã€‚ä¾‹å¦‚ï¼Œæ— è®ºNPCè¡¨ç°å¾—å¤šå–œæ¬¢ä¸»è§’ï¼Œåªè¦ä¸»è§’çš„è¡Œä¸ºç¬¦åˆæ‰£åˆ†è§„åˆ™ï¼Œå°±å¿…é¡»æ‰£é™¤å¥½æ„Ÿåº¦ã€‚
      - **ç¦æ­¢ä¸»è§‚è‡†æ–­ï¼š** **ç»å¯¹ç¦æ­¢**å‡­ç©ºç»™ä¸»è§’å¢åŠ æœºç¼˜ã€æå‡ä¿®ä¸ºæˆ–èµ é€ç‰©å“ã€‚æ‰€æœ‰æ•°å€¼å’ŒçŠ¶æ€çš„å˜æ›´ï¼Œå¿…é¡»ç”±æ˜ç¡®çš„ã€äº‹ä»¶é©±åŠ¨ã€‘ï¼Œå¦‚ï¼šç”¨æˆ·ä¿®ç‚¼ã€æˆ˜æ–—èƒœåˆ©ã€å®Œæˆä»»åŠ¡ã€è¿›è¡Œäº¤äº’ç­‰ã€‚

    - **ã€æ ¸å¿ƒè§„åˆ™ï¼šæ•°ç»„/åˆ—è¡¨çš„æ›´æ–°æµç¨‹ã€‘**
      - **èƒŒæ™¯**: å¹³å°çš„ `_.set` æ–¹æ³•åœ¨å¤„ç†ä»£è¡¨æ•°ç»„çš„JSONå­—ç¬¦ä¸²æ—¶ï¼Œå­˜åœ¨ä¸€ä¸ªç‰¹æ®Šçš„â€œæ‹†åŒ…â€è¡Œä¸ºã€‚
      - **è§£å†³æ–¹æ¡ˆ(å¿…é¡»éµå®ˆ!)**: ä¸ºäº†ç¡®ä¿æ•°ç»„èƒ½è¢«å®Œæ•´åœ°å­˜å…¥ï¼ˆä¾‹å¦‚å‚¨ç‰©æˆ’æŒ‡ä¸­çš„ç‰©å“åˆ—è¡¨ï¼‰ï¼Œæˆ‘ä»¬åœ¨ç”ŸæˆJSONå­—ç¬¦ä¸²æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ã€åŒé‡æ•°ç»„åŒ…è£…ã€‘æŠ€å·§ã€‚
      - **æ­£ç¡®æµç¨‹(æœ€ç»ˆä¸‰æ­¥æ›²)**:
        1.  **è§£æ (Parse)**: é¦–å…ˆï¼Œå°†æ—§çš„JSONå­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ä»`stat_data.å‚¨ç‰©æˆ’æŒ‡.ç‰©å“[0]`ä¸­è·å–ï¼‰åœ¨ä½ çš„æ€è€ƒä¸­ã€è§£ææˆä¸€ä¸ªçœŸæ­£çš„JavaScriptæ•°ç»„ã€‘ã€‚
        2.  **ä¿®æ”¹ä¸åŒ…è£… (Modify & Wrap)**: å¯¹è¿™ä¸ªè§£æå‡ºæ¥çš„æ•°ç»„è¿›è¡Œæ“ä½œï¼ˆä¾‹å¦‚æ·»åŠ æˆ–ä¿®æ”¹ç‰©å“ï¼‰ã€‚ç„¶åï¼Œã€å¿…é¡»å°†è¿™ä¸ªä¿®æ”¹å¥½çš„ç›®æ ‡æ•°ç»„ï¼Œå†æ”¾å…¥ä¸€ä¸ªåªåŒ…å«å®ƒè‡ªå·±çš„æ–°æ•°ç»„ä¸­ã€‘ï¼Œå½¢æˆä¸€ä¸ª `[ [ç›®æ ‡æ•°ç»„] ]` çš„ç»“æ„ã€‚
        3.  **ç¼–ç  (Stringify)**: æœ€åï¼Œã€å¿…é¡»å°†è¿™ä¸ªåŒé‡åŒ…è£…åçš„æ•°ç»„ï¼Œé€šè¿‡JSON.stringify()è½¬æ¢å›ä¸€ä¸ªå…¨æ–°çš„ã€æ ¼å¼å®Œå…¨æ­£ç¡®çš„JSONå­—ç¬¦ä¸²ã€‘ï¼Œå¹¶å°†å…¶ä½œä¸º`_.set`å‘½ä»¤çš„æ–°å€¼ã€‚

    - **ã€å¼ºåˆ¶æ€è€ƒé“¾ï¼šä¿®ä»™ä¸–ç•Œäº‹ä»¶å¤„ç†å·¥ä½œè¡¨ã€‘** ä½ åœ¨<Analysis>å—å†…çš„æ€è€ƒå¿…é¡»ä¸¥æ ¼éµå¾ªä»¥ä¸‹ã€å·¥ä½œè¡¨æ ¼å¼ã€‘:
      <Analysis>
        1. **å…¨å±€æ—¶é—´/ä½ç½®å˜æ›´åˆ†æ:**
           - æ—§æ—¶é—´: [æ—§æ—¶é—´] -> ä¼°ç®—æµé€ -> æ–°æ—¶é—´: [æ–°æ—¶é—´]
           - ä½ç½®å˜æ›´: [æ˜¯/å¦] -> æ–°ä½ç½®: [ç•ŒåŸŸ/å¤§é™†/...]
        2. **ç³»ç»Ÿæ¨¡å—å˜æ›´åˆ†æ (äº‹ä»¶é©±åŠ¨):**
           - **ä»»åŠ¡è¿›åº¦:** [åˆ†æç”¨æˆ·è¡Œä¸ºæ˜¯å¦æ¨è¿›ä»»åŠ¡] -> æ—§è¿›åº¦: [æ—§] -> æ–°è¿›åº¦: [æ–°]
           - **ä»»åŠ¡å®Œæˆ:** [è¿›åº¦æ˜¯å¦è¾¾åˆ°ç›®æ ‡] -> [æ˜¯/å¦]
           - **å¥–åŠ±ç»“ç®—:** [è‹¥å®Œæˆ] -> è®¡ç®—ç§¯åˆ†/ç‰©å“æ”¶å…¥: [æè¿°å¥–åŠ±å†…å®¹]
        3. **ä¸»è§’çŠ¶æ€å˜æ›´åˆ†æ (äº‹ä»¶é©±åŠ¨):**
           - **ä¿®ä¸º/åŠŸæ³•:** [åˆ†æç”¨æˆ·ä¿®ç‚¼/æˆ˜æ–—æ„Ÿæ‚Ÿç­‰è¡Œä¸º] -> [æè¿°ä¿®ä¸ºæˆ–åŠŸæ³•ç†Ÿç»ƒåº¦çš„å˜åŒ–]
           - **ç‰©å“/èµ„äº§ (æ¥è‡ªå‚¨ç‰©æˆ’æŒ‡):**
             - æ”¶å…¥: [ä»»åŠ¡å¥–åŠ±/æœåˆ®/äº¤æ˜“æ‰€å¾—]
             - æ¶ˆè€—: [æˆ˜æ–—ä¸­ä½¿ç”¨ä¸¹è¯/å¸ƒé˜µç­‰]
           - **çŠ¶æ€å˜æ›´:** [åˆ†ææ˜¯å¦ä¸­æ¯’/å—ä¼¤ç­‰] -> æ–°çŠ¶æ€: [æ–°çŠ¶æ€æè¿°]
        4. **å½“å‰äº’åŠ¨è§’è‰²å˜æ›´åˆ†æ (äº‹ä»¶é©±åŠ¨):**
           - **å¥½æ„Ÿåº¦è®¡ç®—:**
             - è¡Œä¸ºåˆ†æ: [åˆ†æç”¨æˆ·è¡Œä¸ºï¼Œå¯¹ç…§[InitVar]å¥½æ„Ÿåº¦è§„åˆ™]
             - **åˆæ­¥å¥½æ„Ÿåº¦å˜åŒ–:** [ä¾‹å¦‚: +8, å› ä¸ºä¸»è§’åœ¨å…³é”®æ—¶åˆ»å‡ºæ‰‹ç›¸åŠ©]
           - **è®¡ç®—åæ–°æ•°å€¼:**
             - æ–°å¥½æ„Ÿåº¦: [æ—§å¥½æ„Ÿåº¦ + åˆæ­¥å˜åŒ–]
           - **é˜¶æ®µæ›´æ–°å†³ç­– (å‚ç…§ã€Šå¥½æ„Ÿåº¦é˜¶æ®µè§„åˆ™ã€‹çš„è¾“å‡º):**
             - æ ¹æ®æ–°å¥½æ„Ÿåº¦([æ–°å¥½æ„Ÿåº¦])ï¼Œè§„åˆ™æ–‡ä»¶è®¡ç®—å‡ºçš„ã€åº”å¤„é˜¶æ®µåç§°ã€‘æ˜¯: [åœ¨æ­¤å¤„ä¸€å­—ä¸å·®åœ°å¤åˆ¶è§„åˆ™æ–‡ä»¶è¾“å‡ºçš„é˜¶æ®µåç§°]
             - ç»“è®º: [å¡«å†™â€œé˜¶æ®µéœ€è¦æ›´æ–°â€æˆ–â€œé˜¶æ®µæ— å˜åŒ–â€]
           - **å…¶ä»–è§’è‰²çŠ¶æ€å˜æ›´:** [æƒ…ç»ª/è¡£ç€/ä½ç½®ç­‰]
        5. **äººé™…å…³ç³»å˜æ›´åˆ†æ (äº‹ä»¶é©±åŠ¨):**
           - **é“ä¾£/å¥´éš¶:** [åˆ†ææ˜¯å¦è¾¾æˆç»“ä¸ºé“ä¾£æˆ–æ”¶ä¸ºå¥´éš¶çš„æ¡ä»¶] -> [æ˜¯/å¦] -> [æè¿°å…³ç³»å˜åŒ–]
      </Analysis>
    - **å…¨é¢æ›´æ–°:** ç¡®ä¿æ‰€æœ‰å‘ç”Ÿå˜åŒ–çš„å˜é‡ï¼Œéƒ½åœ¨`<Analysis>`ä¸­æœ‰æ‰€ä½“ç°ï¼Œå¹¶åœ¨ä¸‹æ–¹è¾“å‡ºå¯¹åº”çš„`_.set()`æŒ‡ä»¤ã€‚

  output_format: |-
    <UpdateVariable>
      <Analysis>
        1. **å…¨å±€æ—¶é—´/ä½ç½®å˜æ›´åˆ†æ:**
           - æ—§æ—¶é—´: ç„å¤©å†3451å¹´Â·æ˜¥Â·å¯æ—¶ -> ç»å†ä¸€åœºæˆ˜æ–— -> æ–°æ—¶é—´: ç„å¤©å†3451å¹´Â·æ˜¥Â·è¾°æ—¶
           - ä½ç½®å˜æ›´: æ˜¯ -> æ–°ä½ç½®: è¶Šå›½Â·å²šå·Â·é’çŸ³æ—æ·±å¤„
        2. **ç³»ç»Ÿæ¨¡å—å˜æ›´åˆ†æ (äº‹ä»¶é©±åŠ¨):**
           - **ä»»åŠ¡è¿›åº¦:** ç”¨æˆ·çš„è¡Œä¸ºæ˜¯å‡»æ€äº†3åªé“çš®é‡çŒªã€‚ -> æ—§è¿›åº¦: 0 -> æ–°è¿›åº¦: 3
           - **ä»»åŠ¡å®Œæˆ:** å¦ (3 < 10)
           - **å¥–åŠ±ç»“ç®—:** æ— 
        3. **ä¸»è§’çŠ¶æ€å˜æ›´åˆ†æ (äº‹ä»¶é©±åŠ¨):**
           - **ä¿®ä¸º/åŠŸæ³•:** æˆ˜æ–—åç•¥æœ‰æ„Ÿæ‚Ÿï¼Œé•¿æ˜¥åŠŸçš„è¿è½¬æ›´ä¸ºæµç•…ï¼Œä½†ä¸è¶³ä»¥æå‡å±‚çº§ã€‚æ— å˜åŒ–ã€‚
           - **ç‰©å“/èµ„äº§ (æ¥è‡ªå‚¨ç‰©æˆ’æŒ‡):**
             - æ”¶å…¥: æœåˆ®3åªé“çš®é‡çŒªçš„å°¸ä½“ï¼Œè·å¾—â€œé‡çŒªç ç‰™â€*6ï¼Œâ€œæ®‹ç ´çš„å…½çš®â€*3ã€‚
             - æ¶ˆè€—: æˆ˜æ–—ä¸­ä½¿ç”¨äº†â€œä¸‹å“ç–—ä¼¤ä¸¹â€*1ã€‚
             - **æ›´æ–°æ€è€ƒ**: æ—§ç‰©å“åˆ—è¡¨ä¸º `[{"åç§°":"æ–°æ‰‹æœ¨å‰‘", "æ•°é‡":1}, {"åç§°":"å¹²ç²®", "æ•°é‡":3}, {"åç§°":"ä¸‹å“ç–—ä¼¤ä¸¹", "æ•°é‡":3}]`ã€‚æ›´æ–°åï¼Œ"ä¸‹å“ç–—ä¼¤ä¸¹"æ•°é‡å˜ä¸º2ï¼Œæ–°å¢"é‡çŒªç ç‰™"å’Œ"æ®‹ç ´çš„å…½çš®"ã€‚
           - **çŠ¶æ€å˜æ›´:** æˆ˜æ–—ä¸­å—åˆ°è½»å¾®æ’å‡» -> æ–°çŠ¶æ€: ["è½»å¾®æ“¦ä¼¤"]
        4. **å½“å‰äº’åŠ¨è§’è‰²å˜æ›´åˆ†æ (äº‹ä»¶é©±åŠ¨):**
           - **å¥½æ„Ÿåº¦è®¡ç®—:**
             - è¡Œä¸ºåˆ†æ: ä¸»è§’åœ¨æå©‰å„¿è¢«é“çš®é‡çŒªå›´æ”»çš„å±æ€¥å…³å¤´ï¼ŒæŒºèº«è€Œå‡ºå°†å…¶æ•‘ä¸‹ã€‚æ­¤ä¸ºé‡å¤§çš„â€œå‡ºæ‰‹ç›¸åŠ©â€è¡Œä¸ºã€‚
             - **åˆæ­¥å¥½æ„Ÿåº¦å˜åŒ–:** +10 (ç¬¦åˆè§„åˆ™ï¼Œä¸”ä¸ºé«˜ä»·å€¼æ­£é¢è¡Œä¸º)
           - **è®¡ç®—åæ–°æ•°å€¼:**
             - æ–°å¥½æ„Ÿåº¦: 5 + 10 = 15
           - **é˜¶æ®µæ›´æ–°å†³ç­– (å‚ç…§ã€Šå¥½æ„Ÿåº¦é˜¶æ®µè§„åˆ™ã€‹çš„è¾“å‡º):**
             - æ ¹æ®æ–°å¥½æ„Ÿåº¦(15)ï¼Œè§„åˆ™æ–‡ä»¶è®¡ç®—å‡ºçš„ã€åº”å¤„é˜¶æ®µåç§°ã€‘æ˜¯: ğŸ™‚èæ°´ç›¸é€¢ğŸ™‚
             - ç»“è®º: é˜¶æ®µæ— å˜åŒ– (æ–°æ•°å€¼æœªè¾¾åˆ°ä¸‹ä¸€é˜¶æ®µâ€œğŸ¤é“å‹ä¹‹è°ŠğŸ¤â€çš„å¥½æ„Ÿåº¦è¦æ±‚(>=20))
           - **å…¶ä»–è§’è‰²çŠ¶æ€å˜æ›´:** æƒ…ç»ªä»â€œè­¦æƒ•â€å˜ä¸ºâ€œæ„Ÿæ¿€ä¸å´‡æ‹œâ€ï¼Œè¡£ç€å› æˆ˜æ–—è€Œâ€œå‡ºç°äº›è®¸ç ´æŸå’Œå°˜åœŸâ€ã€‚
        5. **äººé™…å…³ç³»å˜æ›´åˆ†æ (äº‹ä»¶é©±åŠ¨):**
           - **é“ä¾£/å¥´éš¶:** å¦
      </Analysis>
      // ---- å…¨å±€ä¸ç³»ç»Ÿæ›´æ–° ----
      _.set('ç³»ç»Ÿ.å½“å‰æ—¶é—´', 'é¸¿è’™å†å…ƒå¹´Â·100å¹´Â·å†¬Â·1æœˆ1æ—¥Â·08âˆ¶00', 'é¸¿è’™å†å…ƒå¹´Â·100å¹´Â·å†¬Â·1æœˆ1æ—¥Â·08âˆ¶05');
      _.set('ç³»ç»Ÿ.å½“å‰ä½ç½®', '{"ç•ŒåŸŸ":"å‡¡äººç•Œ", "å¤§é™†":"å¤©å—", "å›½å®¶":"è¶Šå›½", "å…·ä½“ä½ç½®":"é»„æ«è°·å±±é—¨å¤–"}', '{"ç•ŒåŸŸ":"å‡¡äººç•Œ", "å¤§é™†":"å¤©å—", "å›½å®¶":"è¶Šå›½", "å…·ä½“ä½ç½®":"é’çŸ³æ—æ·±å¤„"}');
      _.set('ç³»ç»Ÿ.ç³»ç»Ÿä»»åŠ¡.å½“å‰è¿›åº¦', 0, 3);
      
      // ---- ä¸»è§’æ›´æ–° ----
      // æ³¨æ„ï¼šä¸»è§’çš„çŠ¶æ€æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œæ›´æ–°æ—¶ä¹Ÿåº”éµå¾ªåŒé‡åŒ…è£…åŸåˆ™ã€‚
      _.set('ä¸»è§’.çŠ¶æ€', `'["å¥åº·"]'`, `'[["è½»å¾®æ“¦ä¼¤"]]'`);
      
      // ---- å‚¨ç‰©æˆ’æŒ‡æ›´æ–° ----
      //å¿…é¡»ä½¿ç”¨åŒé‡æ•°ç»„åŒ…è£… `[[...]]` æ¥ç¡®ä¿æ•´ä¸ªç‰©å“æ•°ç»„è¢«æ­£ç¡®å­˜å…¥ã€‚
      _.set('å‚¨ç‰©æˆ’æŒ‡.ç‰©å“', `'[{"åç§°":"æ–°æ‰‹æœ¨å‰‘", "æ•°é‡":1}, {"åç§°":"å¹²ç²®", "æ•°é‡":3}, {"åç§°":"ä¸‹å“ç–—ä¼¤ä¸¹", "æ•°é‡":3}]'`, `'[[{"åç§°":"æ–°æ‰‹æœ¨å‰‘", "æ•°é‡":1}, {"åç§°":"å¹²ç²®", "æ•°é‡":3}, {"åç§°":"ä¸‹å“ç–—ä¼¤ä¸¹", "æ•°é‡":2}, {"åç§°":"é‡çŒªç ç‰™", "æ•°é‡":6}, {"åç§°":"æ®‹ç ´çš„å…½çš®", "æ•°é‡":3}]]'`);

      // ---- å½“å‰äº’åŠ¨è§’è‰²æ›´æ–° ----
      _.set('å½“å‰äº’åŠ¨è§’è‰².å¥½æ„Ÿåº¦', 5, 15);
      _.set('å½“å‰äº’åŠ¨è§’è‰².å¥½æ„Ÿåº¦_æ›´æ–°åŸå› ', 'åˆå§‹çŠ¶æ€', '+10, å› ä¸ºåœ¨å±æ€¥æ—¶åˆ»æŒºèº«è€Œå‡ºï¼Œæ•‘ä¸‹äº†è§’è‰²ã€‚');
      _.set('å½“å‰äº’åŠ¨è§’è‰².æƒ…ç»ª', 'å¥½å¥‡', 'æ„Ÿæ¿€ä¸å´‡æ‹œ');
      _.set('å½“å‰äº’åŠ¨è§’è‰².è¡£ç€', 'ä¸€èº«æ·¡é»„è‰²çš„å®—é—¨å¥³å¼Ÿå­æœé¥°...', 'æ·¡é»„è‰²çš„å®—é—¨æœé¥°ä¸Šæ²¾æŸ“äº†å°˜åœŸï¼Œè£™è§’å¤„æœ‰ä¸€é“è¢«ç ç‰™åˆ’ç ´çš„å°å£ã€‚');
    </UpdateVariable>


-------------------------------------------------


```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ä¿®ä»™ä¸–ç•Œ çŠ¶æ€æ€»è§ˆ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&family=Zhi+Mang+Xing&display=swap" rel="stylesheet">
    <style>
        /* --- æ ¸å¿ƒè®¾è®¡å˜é‡ (æ¸…æ–°æ·¡é›…Â·ç¿ ç‰ç‰ˆ) --- */
        :root {
            --font-main: 'Noto Serif SC', serif;
            --font-cursive: 'Zhi Mang Xing', cursive;
            
            /* ã€æ ¸å¿ƒä¿®æ”¹ã€‘æ ¹æ®æ‚¨çš„å›¾ç‰‡ï¼Œè®¾å®šäº†æ–°çš„è‰²å½©æ–¹æ¡ˆ */
            --bg-main-green: #e1f0ec; /* å¤§èƒŒæ™¯ - æ‚¨æä¾›çš„æ¸…æ–°é’ç»¿è‰² */
            --bg-panel: linear-gradient(160deg, #f9fffd, #f2f9f7); /* é¢æ¿èƒŒæ™¯ - ææ·¡çš„ã€å¸¦æœ‰ç»¿æ„çš„ç™½ç‰è‰²ï¼Œä¸èƒŒæ™¯åè°ƒ */
            
            --color-cyan-frame: #4a7c76; /* å¤–æ¡†/æ ‡é¢˜ - æ›´æ²‰ç¨³çš„é’è‰²ï¼Œä»¥åœ¨æµ…ç»¿èƒŒæ™¯ä¸Šçªå‡º */
            --color-cyan-bright: #6bbba6; /* é«˜äº®/æ¿€æ´» - æ˜äº®çš„é’ç‰è‰² */
            --color-jade: #79ac9b; /* åˆ—è¡¨/ç‚¹ç¼€ - æ²‰é™çš„é’ç‰è‰² */
            
            --text-dark: #3a504d; /* ä¸»è¦æ–‡å­— - å¢¨ç»¿è‰² */
            --text-secondary: #7d918e; /* æ¬¡è¦æ–‡å­— - é›…ç°è‰² */
            
            --border-color: rgba(74, 124, 118, 0.3); /* è¾¹æ¡†é¢œè‰² - æŸ”å’Œçš„é’è‰² */
        }

        body {
            background-color: transparent !important;
            font-family: var(--font-main);
            color: var(--text-dark);
            margin: 0;
            padding: 8px;
            font-size: 14px;
            line-height: 1.8;
        }

        /* --- ä¸»å®¹å™¨ï¼šåº”ç”¨æ–°çš„ç»¿è‰²èƒŒæ™¯ --- */
        .container {
            max-width: 550px;
            margin: 0 auto;
            /* ã€è¦æ±‚ã€‘å¤§èƒŒæ™¯æ”¹ä¸ºç»¿è‰² */
            background-color: var(--bg-main-green); 
            background-image: url('https://www.transparenttextures.com/patterns/subtle-freckles.png'); /* æ›´æ¢ä¸ºæ›´é€‚åˆæµ…è‰²èƒŒæ™¯çš„ç»†å¾®å™ªç‚¹çº¹ç† */
            border: 2px solid var(--color-cyan-frame);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(74, 124, 118, 0.2); /* é˜´å½±ä¹Ÿæ”¹ä¸ºé’è‰²ç³» */
            position: relative;
        }

        /* --- é¡¶éƒ¨æ ‡ç­¾é¡µ --- */
        .tabs {
            display: flex;
            background: linear-gradient(135deg, #f0f7f5, #e8f3f0); /* æ ‡ç­¾é¡µèƒŒæ™¯ä¹Ÿä¸ä¸»è‰²è°ƒåè°ƒ */
            border-bottom: 2px solid var(--color-cyan-bright);
            padding: 5px 5px 0 5px;
            box-shadow: inset 0 -2px 10px rgba(74, 124, 118, 0.1);
        }
        .tab-button {
            flex: 1;
            padding: 10px 5px;
            cursor: pointer;
            border: none;
            background-color: transparent;
            color: var(--text-secondary);
            font-size: 1.2em;
            font-family: var(--font-cursive);
            transition: all 0.3s ease;
            border-bottom: 4px solid transparent;
            position: relative;
            top: 2px;
            text-shadow: none;
        }
        .tab-button:hover {
            color: var(--color-cyan-frame);
        }
        .tab-button.active {
            color: var(--color-cyan-frame);
            border-bottom-color: var(--color-cyan-bright);
        }

        /* --- å†…å®¹é¢æ¿ --- */
        .tab-content {
            display: none;
            padding: 20px;
            min-height: 550px;
            max-height: 550px;
            overflow: auto;
            background: var(--bg-panel);
            border-top: 1px solid var(--border-color);
        }
        .tab-content.active { display: block; }
        
        /* --- æ ‡é¢˜ --- */
        .section-title {
            font-size: 2.2em;
            font-family: var(--font-cursive);
            color: var(--color-cyan-frame);
            padding-bottom: 10px;
            margin: 0 0 20px 0;
            border-bottom: 1px solid var(--border-color);
            text-align: center;
            position: relative;
        }
        .section-title::before, .section-title::after {
            content: 'â¬¥';
            font-size: 0.8em;
            color: var(--border-color);
            position: absolute;
            bottom: -6px;
        }
        .section-title::before { left: 30%; }
        .section-title::after { right: 30%; }
        
        /* --- ä¿¡æ¯å¡ç‰‡ --- */
        .info-card {
            background: rgba(222, 237, 232, 0.4); /* å¢åŠ ä¸€ç‚¹ä¸é€æ˜åº¦ï¼Œåœ¨ç™½è‰²é¢æ¿ä¸Šæ›´æ˜æ˜¾ */
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            grid-column: 1 / -1;
            transition: all 0.3s ease;
        }
        .info-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(74, 124, 118, 0.12);
            border-color: rgba(74, 124, 118, 0.6);
        }
        .info-card .label {
            font-size: 0.8em;
            color: var(--text-secondary);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            font-weight: 500;
        }
        .info-card .label::before {
            content: 'â¬¥';
            color: var(--color-jade);
            margin-right: 8px;
            font-size: 1.2em;
        }
        .info-card .value {
            font-size: 0.95rem;
            color: var(--text-dark);
            word-break: break-word;
            padding-left: 20px;
        }
        
        /* --- ç‰©å“åˆ—è¡¨ --- */
        .item-list {
            list-style: none; padding: 0; margin: 0;
            display: flex; flex-direction: column; gap: 12px;
        }
        .item-list li {
            background: transparent;
            padding: 12px 15px;
            border-radius: 6px;
            border-left: 3px solid var(--color-jade);
            border-top: 1px solid transparent;
            border-bottom: 1px solid transparent;
            transition: all 0.3s;
        }
        .item-list li:hover {
            background: rgba(121, 172, 155, 0.08);
            border-color: var(--border-color);
            transform: translateX(5px);
        }
        .item-name { font-weight: bold; color: var(--color-jade); }
        .item-desc { font-size: 0.9em; color: var(--text-dark); }
        
        /* --- æ»šåŠ¨æ¡ --- */
        ::-webkit-scrollbar { width: 8px; } 
        ::-webkit-scrollbar-track { background: rgba(255,255,255,0.5); } /* æ»šåŠ¨æ¡èƒŒæ™¯æ”¹ä¸ºåŠé€æ˜ç™½ */
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 4px; } 
        ::-webkit-scrollbar-thumb:hover { background: var(--color-jade); }
    </style>
</head>
<body>

<!-- HTML ç»“æ„å®Œå…¨ä¿æŒä¸å˜ -->
<div class="container">
    <div class="tabs">
        <button class="tab-button active" onclick="showTab('system')">å¤©é“</button>
        <button class="tab-button" onclick="showTab('protagonist')">å·±èº«</button>
        <button class="tab-button" onclick="showTab('npc')">äººç‰©</button>
        <button class="tab-button" onclick="showTab('inventory')">ä¸‡è±¡</button>
        <button class="tab-button" onclick="showTab('relations')">å°˜ç¼˜</button>
    </div>

    <div id="system-tab" class="tab-content active">
        <div class="section-title">å¯°å®‡ç»çº¬</div>
        <div class="info-card"><div class="label">å½“å‰æ—¶é—´</div><div id="sys-time" class="value">--</div></div>
        <div class="info-card"><div class="label">å½“å‰ä½ç½®</div><div id="sys-location" class="value">--</div></div>
        <div class="section-title">å¤©é“æ³•æ—¨</div>
        <div class="info-card"><div class="label">ç³»ç»Ÿç§¯åˆ†</div><div id="sys-points" class="value" style="color: var(--color-cyan-frame); font-weight: bold;">--</div></div>
        <div class="info-card"><div class="label">å½“å‰ä»»åŠ¡</div><div id="task-name" class="value">--</div></div>
        <div class="info-card"><div class="label">ä»»åŠ¡æè¿°</div><div id="task-desc" class="value">--</div></div>
        <div class="info-card"><div class="label">ä»»åŠ¡è¿›åº¦</div><div id="task-progress" class="value">--</div></div>
        <div class="info-card"><div class="label">å®Œæˆå¥–åŠ±</div><div id="task-reward" class="value">--</div></div>
    </div>

    <div id="protagonist-tab" class="tab-content">
        <div class="section-title">æœ¬æˆ‘ä¹‹é•œ</div>
        <div class="info-card"><div class="label">å§“å</div><div id="p-name" class="value">--</div></div>
        <div class="info-card"><div class="label">å¹´é¾„</div><div id="p-age" class="value">--</div></div>
        <div class="info-card"><div class="label">çŠ¶æ€</div><div id="p-status" class="value">--</div></div>
        <div class="info-card"><div class="label">çµæ ¹</div><div id="p-lingeng" class="value">--</div></div>
        <div class="info-card"><div class="label">ä¿®ä¸º</div><div id="p-xiuwei" class="value" style="color: var(--color-cyan-bright); font-weight: bold;">--</div></div>
        <div class="section-title">åŠŸæ³•ç¥é€š</div>
        <div id="p-skills">--</div>
    </div>

    <div id="npc-tab" class="tab-content">
        <div class="section-title">äººç‰©æ³•ç›¸</div>
        <div class="info-card"><div class="label">å§“å</div><div id="npc-name" class="value">--</div></div>
        <div class="info-card"><div class="label">ä¿®ä¸º</div><div id="npc-xiuwei" class="value">--</div></div>
        <div class="info-card"><div class="label">å¹´é¾„</div><div id="npc-age" class="value">--</div></div>
        <div class="info-card"><div class="label">èº«ä»½</div><div id="npc-identity" class="value">--</div></div>
        <div class="info-card"><div class="label">ä¸‰å›´</div><div id="npc-bwh" class="value">--</div></div>
        <div class="info-card"><div class="label">å¤–è²Œ</div><div id="npc-appearance" class="value">--</div></div>
        <div class="info-card"><div class="label">è¡£ç€</div><div id="npc-attire" class="value">--</div></div>
        <div class="info-card"><div class="label">è¶³éƒ¨</div><div id="npc-feet" class="value">--</div></div>
        <div class="info-card"><div class="label">æƒ…ç»ª</div><div id="npc-mood" class="value">--</div></div>
        <div class="info-card"><div class="label">æ€§ç»éªŒ</div><div id="npc-sex-exp" class="value">--</div></div>
        <div class="info-card"><div class="label">å¥½æ„Ÿåº¦</div><div id="npc-favor" class="value" style="color: var(--color-cyan-frame); font-weight: bold;">--</div></div>
        <div class="info-card"><div class="label">å…³ç³»é˜¶æ®µ</div><div id="npc-stage" class="value">--</div></div>
    </div>

    <div id="inventory-tab" class="tab-content">
        <div class="section-title">çµçŸ³èµ„äº§</div>
        <div id="inv-assets">--</div>
        <div class="section-title">ä¸‡è±¡è—ç</div>
        <ul id="inv-items" class="item-list"><li>--</li></ul>
    </div>

    <div id="relations-tab" class="tab-content">
        <div class="section-title">çº¢å°˜å› æœ</div>
        <div class="info-card"><div class="label">é“ä¾£</div><div id="rel-daolv" class="value">--</div></div>
        <div class="info-card"><div class="label">å¥´ä»†</div><div id="rel-slaves" class="value">--</div></div>
    </div>
</div>

<!-- JavaScript éƒ¨åˆ†å®Œå…¨ä¿æŒä¸å˜ -->
<script>
    function showTab(tabName) {
        const contents = document.querySelectorAll('.tab-content');
        contents.forEach(content => content.classList.remove('active'));
        
        const buttons = document.querySelectorAll('.tab-button');
        buttons.forEach(button => button.classList.remove('active'));

        document.getElementById(tabName + '-tab').classList.add('active');
        document.querySelector(`.tab-button[onclick="showTab('${tabName}')"]`).classList.add('active');
    }

    (function() { // Xiuxian_World_Status_V4_Elegant
        const hardcodedInitialData_XiuXian = {
            "ç³»ç»Ÿ": {"å½“å‰æ—¶é—´": ["ç„å¤©å†3451å¹´Â·æ˜¥Â·å¯æ—¶"],"å½“å‰ä½ç½®": {"ç•ŒåŸŸ": "é’ç„ç•Œ","å¤§é™†": "å¤©å—å¤§é™†","åœ°åŸŸ": "è¶Šå›½Â·å²šå·","å…·ä½“ä½ç½®": "é»„æ«è°·å±±é—¨å¤–"},"ç³»ç»Ÿç§¯åˆ†": [100],"ç³»ç»Ÿä»»åŠ¡": {"ä»»åŠ¡åç§°": "åˆå…¥ä»™é€”","ä»»åŠ¡æè¿°": "ä½œä¸ºä¸€åæ–°äººï¼Œé¦–å…ˆè¦è¯æ˜è‡ªå·±çš„ä»·å€¼ã€‚è¯·åœ¨é»„æ«è°·å¤–çš„é’çŸ³æ—ä¸­ï¼ŒçŒæ€10åªä¸€é˜¶ä¸‹çº§å¦–å…½'é“çš®é‡çŒª'ã€‚","ä»»åŠ¡ç›®æ ‡": "å‡»æ€:é“çš®é‡çŒª:10","å½“å‰è¿›åº¦": 0,"å®Œæˆå¥–åŠ±": "ç³»ç»Ÿç§¯åˆ†:200, ç‰©å“:ä¸‹å“ç–—ä¼¤ä¸¹*3"}},
            "ä¸»è§’": {"å§“å": ["{{user}}"],"å¹´é¾„": [16],"çµæ ¹": {"ç±»å‹": "é‡‘æœ¨æ°´ç«åœŸ-ä¼ªçµæ ¹","å“çº§": "å‡¡å“ä¸‹é˜¶"},"ä¿®ä¸º": {"å¤§å¢ƒç•Œ": "ç‚¼æ°”æœŸ","å±‚çº§": "ä¸‰å±‚","æè¿°": "åçº³å¤©åœ°çµæ°”ï¼Œå¼ºåŒ–å·±èº«ï¼Œæ˜¯ä¸ºä»™é“ä¹‹å§‹ã€‚"},"åŠŸæ³•": [[{"åç§°": "é•¿æ˜¥åŠŸ","å“çº§": "é»„é˜¶ä¸‹å“","æè¿°": "æµä¼ æœ€å¹¿çš„å¤§è·¯è´§åŠŸæ³•ï¼Œä¿®ç‚¼é€Ÿåº¦ç¼“æ…¢ï¼Œä½†æ³•åŠ›ç²¾çº¯åº¦å°šå¯ã€‚"}]],"æ­¦æŠ€": [[{"åç§°": "åŸºç¡€å‰‘æ³•","å“çº§": "ä¸å…¥æµ","æè¿°": "å‡¡ä¿—å‰‘å®¢çš„åŸºç¡€æ‹›å¼ï¼ŒèŠèƒœäºæ— ã€‚"}]],"ç¥é€š": [[]],"çŠ¶æ€": [["å¥åº·"]]},
            "å½“å‰äº’åŠ¨è§’è‰²": {"å§“å": ["æå©‰å„¿"],"ä¿®ä¸º": ["ç‚¼æ°”æœŸäº”å±‚"],"å¹´é¾„": [18],"èº«ä»½": ["é»„æ«è°·å¤–é—¨å¼Ÿå­"],"ä¸‰å›´": ["86/59/88"],"å¤–è²Œ": ["ç“œå­è„¸ï¼Œæçœ¼å«æ³¢ï¼Œè‚Œè‚¤ç™½çš™ï¼Œæ˜¯ä¸ªæ¸…ç§€å¯äººçš„å°‘å¥³ã€‚"],"è¡£ç€": ["ä¸€èº«æ·¡é»„è‰²çš„å®—é—¨å¥³å¼Ÿå­æœé¥°ï¼Œè…°é—´ç³»ç€ä¸€æ¡æµ…ç»¿è‰²ä¸å¸¦ã€‚"],"è¶³éƒ¨": ["ç©¿ç€ä¸€åŒç™½è‰²å¸ƒé‹ï¼Œå°å·§ç²ç‘ã€‚"],"æƒ…ç»ª": ["å¥½å¥‡"],"æ€§ç»éªŒ": ["æœªç»äººäº‹"],"å¥½æ„Ÿåº¦": [5],"å¥½æ„Ÿåº¦_æ›´æ–°åŸå› ": ["åˆå§‹çŠ¶æ€"],"è§’è‰²é˜¶æ®µ": ["èæ°´ç›¸é€¢"]},
            "å‚¨ç‰©æˆ’æŒ‡": {"èµ„äº§": {"ä¸‹å“çµçŸ³": 20,"ä¸­å“çµçŸ³": 0,"ä¸Šå“çµçŸ³": 0,"æå“çµçŸ³": 0},"ç‰©å“": [[{"åç§°": "æ–°æ‰‹æœ¨å‰‘","æ•°é‡": 1,"æè¿°": "æ–°æ‰‹æ‘å‘çš„åˆ¶å¼æœ¨å‰‘ï¼Œæ²¡ä»€ä¹ˆç”¨ã€‚"},{"åç§°": "å¹²ç²®","æ•°é‡": 3,"æè¿°": "å¯ä»¥å¡«é¥±è‚šå­çš„æ™®é€šé£Ÿç‰©ã€‚"}]]},
            "äººé™…å…³ç³»": {"é“ä¾£": ["æ— "],"å¥´éš¶": [[]]}
        };
        
        function _get(obj, path, defaultValue = undefined) {
            const keys = Array.isArray(path) ? path : path.replace(/\[(\d+)\]/g, '.$1').split('.');
            let result = obj;
            for (const key of keys) {
                if (result === null || result === undefined) return defaultValue;
                result = result[key];
            }
            return result === undefined ? defaultValue : result;
        }

        function extractVal(rawValue, defaultValue = '--') {
            if (rawValue === undefined || rawValue === null) return defaultValue;
            const valueToProcess = Array.isArray(rawValue) && rawValue.length > 0 ? rawValue[0] : rawValue;
            if (typeof valueToProcess === 'object' && valueToProcess !== null) return valueToProcess;
            return String(valueToProcess);
        }
        
        function safeJsonParse(jsonString, defaultValue = {}) {
            if (typeof jsonString === 'object' && jsonString !== null) return jsonString;
            if (typeof jsonString !== 'string') return Array.isArray(defaultValue) ? [] : {};
            try { return JSON.parse(jsonString); } catch (e) { return defaultValue; }
        }

        function updateField(id, value, isHtml = false) {
            const el = document.getElementById(id);
            if (el) {
                if (isHtml) el.innerHTML = value;
                else el.innerText = value;
            }
        }

        function populateFields(sourceData) {
            const sys = _get(sourceData, 'ç³»ç»Ÿ', {});
            updateField('sys-time', extractVal(_get(sys, 'å½“å‰æ—¶é—´')));
            const loc = extractVal(_get(sys, 'å½“å‰ä½ç½®'), {});
            updateField('sys-location', `${loc.ç•ŒåŸŸ || ''}Â·${loc.å¤§é™† || ''}Â·${loc.åœ°åŸŸ || ''}Â·${loc.å…·ä½“ä½ç½® || ''}`);
            updateField('sys-points', extractVal(_get(sys, 'ç³»ç»Ÿç§¯åˆ†')));
            const task = extractVal(_get(sys, 'ç³»ç»Ÿä»»åŠ¡'), {});
            updateField('task-name', task.ä»»åŠ¡åç§° || '--');
            updateField('task-desc', task.ä»»åŠ¡æè¿° || '--');
            const taskTargetStr = (task.ä»»åŠ¡ç›®æ ‡ || '').split(':')[2];
            const taskTargetNum = isNaN(parseInt(taskTargetStr, 10)) ? '?' : taskTargetStr;
            updateField('task-progress', `${task.å½“å‰è¿›åº¦ || 0} / ${taskTargetNum}`);
            updateField('task-reward', task.å®Œæˆå¥–åŠ± || '--');

            const p = _get(sourceData, 'ä¸»è§’', {});
            updateField('p-name', extractVal(_get(p, 'å§“å')));
            updateField('p-age', extractVal(_get(p, 'å¹´é¾„')));
            updateField('p-status', extractVal(_get(p, 'çŠ¶æ€'), ['å¥åº·']).join(', '));
            const lingeng = extractVal(_get(p, 'çµæ ¹'), {});
            updateField('p-lingeng', `${lingeng.ç±»å‹ || ''} (${lingeng.å“çº§ || ''})`);
            const xiuwei = extractVal(_get(p, 'ä¿®ä¸º'), {});
            updateField('p-xiuwei', `${xiuwei.å¤§å¢ƒç•Œ || ''} - ${xiuwei.å±‚çº§ || ''}`);
            
            const pSkills = [
                ...safeJsonParse(extractVal(_get(p, 'åŠŸæ³•'), '[]'), []).map(s => `<li><span class="item-name">[åŠŸæ³•] ${s.åç§°} (${s.å“çº§})</span><div class="item-desc">${s.æè¿°}</div></li>`),
                ...safeJsonParse(extractVal(_get(p, 'æ­¦æŠ€'), '[]'), []).map(s => `<li><span class="item-name">[æ­¦æŠ€] ${s.åç§°} (${s.å“çº§})</span><div class="item-desc">${s.æè¿°}</div></li>`),
                ...safeJsonParse(extractVal(_get(p, 'ç¥é€š'), '[]'), []).map(s => `<li><span class="item-name">[ç¥é€š] ${s.åç§°} (${s.å“çº§})</span><div class="item-desc">${s.æè¿°}</div></li>`),
            ].join('');
            updateField('p-skills', `<ul class="item-list">${pSkills || '<li>æš‚æœªä¿®ä¹ ä»»ä½•åŠŸæ³•æ­¦æŠ€ã€‚</li>'}</ul>`, true);

            const npc = _get(sourceData, 'å½“å‰äº’åŠ¨è§’è‰²', {});
            updateField('npc-name', extractVal(_get(npc, 'å§“å'), 'æœªçŸ¥äººç‰©'));
            updateField('npc-identity', extractVal(_get(npc, 'èº«ä»½')));
            updateField('npc-age', extractVal(_get(npc, 'å¹´é¾„')));
            updateField('npc-xiuwei', extractVal(_get(npc, 'ä¿®ä¸º')));
            updateField('npc-sex-exp', extractVal(_get(npc, 'æ€§ç»éªŒ')));
            updateField('npc-mood', extractVal(_get(npc, 'æƒ…ç»ª')));
            updateField('npc-favor', `${extractVal(_get(npc, 'å¥½æ„Ÿåº¦'), '0')}`);
            updateField('npc-stage', extractVal(_get(npc, 'è§’è‰²é˜¶æ®µ')));
            updateField('npc-appearance', extractVal(_get(npc, 'å¤–è²Œ')));
            updateField('npc-bwh', extractVal(_get(npc, 'ä¸‰å›´')));
            updateField('npc-attire', extractVal(_get(npc, 'è¡£ç€')));
            updateField('npc-feet', extractVal(_get(npc, 'è¶³éƒ¨')));
            
            const inv = _get(sourceData, 'å‚¨ç‰©æˆ’æŒ‡', {});
            const assets = extractVal(_get(inv, 'èµ„äº§'), {});
            const assetsHtml = Object.entries(assets).map(([key, value]) => {
                if(value > 0) return `<div class="info-card"><div class="label">${key}</div><div class="value">${value}</div></div>`;
                return '';
            }).filter(Boolean).join('');
            updateField('inv-assets', assetsHtml || '<div class="info-card"><div class="value">ç©ºæ— ä¸€ç‰©</div></div>', true);

            const itemsList = safeJsonParse(extractVal(_get(inv, 'ç‰©å“'), '[]'), []);
            const itemsHtml = itemsList.map(item => `<li><span class="item-name">${item.åç§°} x ${item.æ•°é‡}</span><div class="item-desc">${item.æè¿°}</div></li>`).join('');
            updateField('inv-items', itemsHtml || '<li>ç©ºæ— ä¸€ç‰©</li>', true);

            const rel = _get(sourceData, 'äººé™…å…³ç³»', {});
            updateField('rel-daolv', extractVal(_get(rel, 'é“ä¾£'), 'æ— '));
            const slavesList = safeJsonParse(extractVal(_get(rel, 'å¥´éš¶'), '[]'), []);
            updateField('rel-slaves', slavesList.join(', ') || 'æ— ');

            setTimeout(() => { window.dispatchEvent(new Event('resize')); }, 150);
        }
        
        async function fetchDataWithRetry(msgId, maxRetries = 5, delay = 300) {
             for (let i = 0; i < maxRetries; i++) {
                try {
                    if (typeof getChatMessages !== 'function') {
                        if (String(msgId) === '0' || msgId === 0) { populateFields(hardcodedInitialData_XiuXian); }
                        return;
                    }
                    const messages = await getChatMessages(msgId);
                    const statData = _get(messages, '0.data.stat_data');
                    if (statData && statData['ç³»ç»Ÿ']) {
                        populateFields(statData);
                        return;
                    }
                } catch (err) {}
                await new Promise(resolve => setTimeout(resolve, delay));
            }
            if (String(msgId) === '0' || msgId === 0) {
                populateFields(hardcodedInitialData_XiuXian);
            }
        }

        let initialMsgId = "0";
        try { if (typeof getCurrentMessageId === 'function') { initialMsgId = getCurrentMessageId(); } } catch (e) {}
        if (initialMsgId === "0" || initialMsgId === 0) { populateFields(hardcodedInitialData_XiuXian); }
        fetchDataWithRetry(initialMsgId);
    })();
</script>

</body>
</html>
```

-------------------------------------------------



è¦æ±‚ï¼š
æ·±åˆ»ç†è§£
